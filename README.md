# Coursework

## To fix

- [x] First server (Linux)
- [x] Second server (Linux)
- [x] Log server for first (optional)
- [x] Log server for second (optional)
- [ ] GUI client (optional) (Windows)
- [x] Some strange errors with pipes in secons server

## Что и как работает

Если вдруг препод спросит, где велась основная разработка, то CLion + VS Code

- __first__- здесь лежит сервер, который отсылает инфу о размере файла подкачки, работает на Linux
- __second__ - здесь лежит сервер, который отсылает инфу о времени работы серверного процесса и размере экрана, работает на Linux
- __log__ - сервер логирования
- __client__ - там лежит сам клиент, с которого будет взаимодействие с серверами

## Скрипт для запуска

В репозитории есть скрипт __build_servers.sh__ , который собирает и запускает сервера, ставит необходимые зависимости, клиент же надо будет самому собрать в Visual Studio. В скрипте сервера по заданию запускаются в фоновом режиме, потому что настроено логирование. Сервера для логирования тоже. Чтобы понимать, что происходит в серверах, сервера логирования создают специальные файлы и записывают туда информацию. Чтобы ее получить, достаточно вызвать команду:

```shell
tail -f *название лог файла* 
```

Благодаря этой команде будут подгружаться в консоль события.

## Заврешние работы серверов

Поскольку все сервера запускаются в фоновом режиме, то и сигнал SIGINT, который отбрабатывается в коде, для корректного завершения работы сервера отдавать не получится с помощью Ctrl + C, поэтому для завершения работы серверов надо будет выполнить в консоли вот эти команду:

```shell
kill -2 *pid первого сервера* *pid второго сервера*
```

Сервера логирования завершаются тогда же, когда и основные сервера, поэтому о корректном их завершении беспокоиться не надо.<br>
Чтобы узнать PID серверов, вводим эту команду:

```shell
pgrep first_server && pgrep second_server
```

Чтобы особо тебе не заморачиваться, я написала скрипт __finish_servers.sh__, запускаешь и сервера выключаются.
